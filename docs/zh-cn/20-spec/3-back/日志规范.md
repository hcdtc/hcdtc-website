# 日志规范

## 日志分类

- `DEBUG`：非常具体的信息，只能用于开发调试使用。部署到生产环境后，只能保持很短的时间，通常用于临时开启，进行调试
- `INFO`：重要的业务处理提示，例如，业务正常结束，关键操作已完成等等
- `WARN`：处理过程可以继续，但必须对这个问题给予额外关注。这个问题又可以细分成两种情况：
 - 第一种是存在严重的问题但有应急措施（比如数据库不可用，使用Cache）
 - 第二种是潜在问题及建议（ATTENTION）

比如生产环境的应用运行在`开发`模式下、管理控制台没有密码保护等。系统可以允许这种错误的存在，但必须及时做跟踪检查用户参数错误。可以使用`WARN`日志级别来记录用户输入参数错误的情况，避免用户投诉时，无所适从。

- `ERROR`：系统发生了非常严重的问题，必须马上有人进行处理。没有系统可以忍受这个级别的问题的存在，比如：NPE（空指针异常），数据库不可用，关键业务流程中断等等

## 日志使用规范

- 生产环境的日志级别至少是`INFO`级别以上，避免过多的日志产生，对存储空间造成压力、对错误排查造成混淆等等
- 核心方法的`进入`、`离开`、`分支流程`、`关键参数`等等需要`DEBUG`留痕，用于线上问题临时排查和定位
- 关键业务的处理完成、关键指标的计算结果等等需要`INFO`提示，为关键流程的梳理提供线索
- 对于存在严重问题，但是已经采取了应对措施或者可能存在潜在问题需要提醒运维人员及时关注的，需要`WARN`进行警告
- 对于不可恢复、必须人工干预的进行`ERROR`处理
- 所有日志输出尽量附带`上下文环境信息`，例如，关键参数、关键位置等等
- 日志参数必须通过`{}`占位符的形式予以输出
- POJO类型的参数必须重写`toString`方法，否则只会输出对象的`hashCode`

> 这里主要强调下`DEBUG`、`INFO`两个级别的使用，运用的得当，将会为线上排除问题带来莫大的好处。