# 2019-04-29

1. 泛化接口。
对于消息监听的service,不要用RocketmqXXX命名，直接MqXXX就好。底层消息系统更换最好不影响接口使用

2. SQL注入问题
建表的DDL直接被执行是有恶意SQL注入的风险的

3. 多线程任务的错误感知。
数据分发的时候，当一个线程执行失败，主线程要立马感知到并停止继续执行分页查询以及将数据发给消费组操作。

4. 数据恢复问题
租户维度对于大数据而言，不要用事务，需要将当前租户id更改为uniqueId而不是删除，然后执行成功删除，否则改回来

5. offset 消费起点问题
对于offset的查询，从send表的初始化时间戳前面的最近的数据作为消费offset起始数据。因为在初始化前队列可能已经有了消息，
查不到会从0消费。